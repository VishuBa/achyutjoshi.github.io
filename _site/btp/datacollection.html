<!DOCTYPE html>
<html lang="en">
  

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>Flight Prices Prediction</title>

    <!-- Styles -->
    <link href="assets/css/theDocs.all.min.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="../apple-touch-icon.html">
    <link rel="icon" href="assets/img/favicon.ico">
  <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Achyut Joshi - Entrepreneur, Avid Traveller, IITian, Skeptic, Hustler and a lifelong learner. I share my life through this blog.</title>
<meta property="og:title" content="Achyut Joshi" />
<meta name="description" content="Entrepreneur, Avid Traveller, IITian, Skeptic, Hustler and a lifelong learner. I share my life through this blog." />
<meta property="og:description" content="Entrepreneur, Avid Traveller, IITian, Skeptic, Hustler and a lifelong learner. I share my life through this blog." />
<link rel="canonical" href="http://localhost:4000/btp/datacollection" />
<meta property="og:url" content="http://localhost:4000/btp/datacollection" />
<meta property="og:site_name" content="Achyut Joshi" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Achyut Joshi",
"description": "Entrepreneur, Avid Traveller, IITian, Skeptic, Hustler and a lifelong learner. I share my life through this blog.",
"url": "http://localhost:4000/btp/datacollection"}</script>
<!-- End Jekyll SEO tag -->

  </head>


    <main class="container">
      <div class="row">

        <!-- Sidebar -->
        <aside class="col-md-3 col-sm-3 sidebar">

          <ul class="sidenav dropable sticky">
            <li><a  href=/btp/flightprices>Overview</a></li>
            <li>
              <a class="active" href=/btp/datacollection>Data Collection</a>
            </li>

            <li>
              <a href=/btp/dataprep >Data Preparation</a>
            </li>

            <li>
              <a href = /btp/ourmodel >Our Model</a>
            </li>
            <li>
              <a href = /btp/stats >Statistical Analysis</a>
            </li>

            <li>
              <a href = /btp/graphs >Analysis & Graphs</a>
            </li>

            <li>
              <a href = /btp/status >Project Status & Future Work </a>
            </li>

            <li>
              <a href = /btp/results>Results & Conclusions</a>
            </li>
            

          </ul>

        </aside>
        <!-- END Sidebar -->


        <!-- Main content -->
        <article class="col-md-9 col-sm-9 main-content" role="main">
          
          <header>
            <h1>Data Collection</h1>
            <p>Data Collection is one of the most important aspect of this project. There are various sources of airfare data on the Web, which we could use to train our models. A multitude of consumer travel sites supply fare information for multiple routes, times, and airlines.</p>
            <p>We tried various sources ranging from many APIs to scraping consumer travel websites. In this section we have discussed in detail on these various sources and the importance of parameters that are collected.</p>
            
            <ol class="toc">
              <li><a href="#datasources">Data Sources</a></li>
              <li><a href="#whatwhen">What and When we collected?</a></li>
              <li><a href="#automate">Automating the Collection</a></li>
              
            </ol>
          </header>

          <section>
            <h2 id="datasources">Data Sources</h2>
            <p>Historical air flight prices are not readily available on the internet. Therefore the only option that we have is to use some resources and collect data over a period of time. There are many <b>APIs</b> made available by companies like Amadeus, Sky Scanner. However, the number of flights they returned for a domestic route in India are limited. </p>
            <p>Thus we had to explore APIs by Indian companies. <b>GoIbibo & Expedia </b>provide ready to use APIs which returns a set of variables of a certain route. However, when GoIbibo API was used to extract such flight prices, the returned set of parameters were in a complex form & the raw data had to be cleaned several times.</p>
            <p>Therefore, we decided to build a web spider that extracts the required values from a website and stores it as a CSV file. We decided to scrape Makemytrip website using a manual spider made in Python.</p>
            <br>
            <h5>Web Scraper (Python2.7)</h5>

            <p><code>urllib2</code> library was used to access the Makemytrip website and load the required page a json object. This object was parsed using inbuilt python functions and a csv database was obtained. <code>dateutil.rrule</code> library was used to obtain a set of dates between two dates on which the above functions can be applied to get the data for a range of dates. The whole script is open-sourced on <a target="_blank" href = "https://github.com/achyutjoshi/Flight-Prices-Scraper" >Github.</a></p>
            <br>


            <section>

            <h2 id="whatwhen">What and When we collected?</h2>
            <h5>What?</h5>
            <p>The basic structure of the script successfully extracts information from the Makemytrip website and outputs a csv data file. Now an important aspect is to decide the parameters that might be needed for the flight prediction algorithm.</p>
            <p>Makemytrip returns numerous variables for each flight returned. However not all are required and thus we selected the following - 
            <ol>
            <li>Origin City</li>
            <li>Destination City</li>
            <li>Departure Date</li>
            <li>Departure Time</li>
            <li>Arrival Time</li>
            <li>Total Fare</li>
            <li>Airway Carrier</li>
            <li>Duration</li>
            <li>Class Type - Economy/Business </li>
            <li>Flight Number</li>
            <li>Hopping - Boolean</li>
            <li>Taken Date - date on which this data was collected</li>
            </ol>
            </p>
            <br>
            <img class="img-shadow img-responsive center-block" src="/assets/images/btp/collect1.png"></img>
            <br>
            <h5>When?</h5>
            <p>We collected prices for flights having departure date from 21st August 2016 to 21st November. This implies that we collected data with max 92 days to departure. Our model is restricted to predict a maximum of 45 days to departure and thus we collected data for maximum of 92 days. This made sure that we had enough data for 45 days of departure.</p>
            <br>
            <img class="img-shadow img-responsive center-block" src="/assets/images/btp/excel.png"></img>
            <br>
            <p>As you can observe the cascading effect of dates. Due to this, we have only one day's data of flights having a 92 days to departure. Therefore to restrict our model to 45 days to departure, we had to collevt data till 92 days to departure to get enough valid data.</p>
            <br>
            

          </section>
          <section>
            
            <h2 id="automate">Automating the Collection</h2>
            <p>The above script had to be run daily to get the required data. Manually running the file was senseless because there are many ways to automate the script. There are multiple cloud servers like Microsoft Azure or AWS EC2 which can be used to host the python script.</p>
            <p>We used Microsoft Azure initially and the process of setting up a virtual server is quite easy. However, the free trial period was limited and thus we had to shift to our institute's local server. Linux system provides a beautiful option called Cronjobs. It is an in-built scheduling option that is very easy to use. You can read a detailed blog on automating python script <a target="_blank" href = "https://achyutjoshi.github.io/datascience/how-to-run-automated-python-script-on-remote-machine">here</a>.</p>

            
          </section>


          


          
          
        </article>
        <!-- END Main content -->
      </div>
    </main>




    <!-- Scripts -->
    <script src="assets/js/theDocs.all.min.js"></script>
    <script src="assets/js/custom.js"></script>

  </body>
</html>
